import yambus from '@crosspath/yambus'

<% if client == 'axios' %>
import axios from 'axios'
<% end %>

const routes = <%= routes_json.html_safe %>

const route_functions = yambus.generate_route_functions(
  routes,
  (route, args) => {
    const params = yambus.build_request_options(route, args)
    <% if client == 'axios' %>
    return axios.request({
      url:    params.path,
      method: route.verb,
      params: params.url_options,
      data:   params.data
    })
    <% else %>
    return <%= client %>(route, params)
    <% end %>
  }
)
export default route_functions
